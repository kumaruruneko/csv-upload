jQuery(function(d){function t(){d(".tb_box dl").each(function(){var t=d(this).find("dt").children("input").attr("data-base_val")+"["+d(this).find("dt").children("input").val()+"]";d(this).find("dt").children("input").attr("name",t),d(this).find("dd").children("input").attr("name",t)})}d(".acf-tab-group li").eq(1).hasClass("active")?d(".tb_box").show():d(".tb_box").hide(),d(".acf-tab-group li").on("click",function(){1==d(".acf-tab-group li").index(this)?d(".tb_box").show():d(".tb_box").hide()}),t(),d(".tb_box dl input").on("change",function(){t()}),d(document).on("click",".del_mc",function(){d(this).parents("dl").fadeOut("fast").queue(function(){this.remove()})}),d(document).on("click",".add_mc",function(){var t=d(this).parents(".tb_box").attr("data-set_val"),t=d('<div data-set_val=""><span></span><dl><dt>機種名：<input required type="text" name="'+t+'" value="" size="100" data-base_val="'+t+'"></dt ><dd>設置台数：<input required type="text" name="" value="" size="10"></dd ><dd><button type="button" class="btn btn-primary btn-success del_mc">削除</button></dd></dl></div>').hide().fadeIn(1e3);d(this).parents(".tb_box").append(t)}),d(document).on("change",".tb_box dl dt input",function(){var t=d(this).attr("data-base_val"),a=t+"["+d(this).val()+"]";d(this).attr("name",a),""==t&&(a=(t=d(this).attr("name"))+"["+d(this).val()+"]"),d(this).parent("dt").next("dd").children("input").attr("name",a),console.log(a)}),d(document).on("click",".add_rate",function(){d(this).parents(".tb_box").children("div").attr("data-set_val");var t=d('<div data-set_val="" class="tb_box" id="tb_box-" style="display: block;"><h3>レート別：<input required class="cs_rate" type="text" placeholder="4円パチンコ・5円スロットなど" name="" value="" size="50">遊技台種別：<label class="cs_type-p-l" for="pachi1" ><input class="cs_type-p" checked="" type="radio" id="pachi1" name="" value="pachinko">パチンコ</label><label class="cs_type-s-l" for="slot1"><input class="cs_type-s" type="radio" id="slot1" name="" value="slot">スロット</label><div class="btn_group"><button type="button" class="btn btn-primary add_rate">レートを追加</button><button type="button" class="btn btn-primary add_mc">機種を追加</button><button type="button" class="btn btn-primary btn-success del_rate">レートを削除</button></div></h3><div><span></span><dl><dt>機種名：<input required type="text" name="" value="" size="100" data-base_val=""></dt ><dd>設置台数：<input required type="text" name="" value="" size="10"></dd ><dd><button type="button" class="btn btn-primary btn-success del_mc">削除</button></dd></dl></div></div>').hide().fadeIn(1e3);d("#custom_setting .inside").append(t);var s=0;d(".tb_box").each(function(){var t,a,e,n,i;""==d(this).attr("data-set_val")&&(t="cs['cs"+s+"'][レート別]",a="cs['cs"+s+"'][遊技台種別]",e="pachi"+s,n="slot"+s,i="cs['cs"+s+"']",d(this).attr("id","box-"+s),d(this).attr("data-set_val",i),d(this).find(".cs_rate").attr("name",t),d(this).find(".cs_type-p").attr("id",e),d(this).find(".cs_type-p").attr("name",a),d(this).find(".cs_type-s").attr("id",n),d(this).find(".cs_type-s").attr("name",a),d(this).find(".cs_type-p-l").attr("for",e),d(this).find(".cs_type-s-l").attr("for",n),d(this).find("dt input").attr("name",i),d(this).find("dt input").attr("data-base_val",i)),s++})}),d(document).on("click",".del_rate",function(){d(this).parents(".tb_box").fadeOut("fast").queue(function(){this.remove()})}),d('#custom_setting dd input[type="text"]').each(function(){var t,a=d(this).val();Number.isFinite(Number(a))?d(this).attr("style","background-color:white"):(t=d(this).closest(".tb_box").children("h3").children("input").val(),a=d(this).closest("dl").children("dt").children("input").val(),d(this).attr("style","background-color:red"),alert(t+"の"+a+"の設置台数の入力にエラーがあります"))}),d('#custom_setting dd input[type="text"]').on("blur",function(){var t=d(this).val();Number.isFinite(Number(t))?d(this).attr("style","background-color:white"):d(this).attr("style","background-color:red")})});